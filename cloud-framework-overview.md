---
type: "manual"
description: "VK-UniCloud 框架概述和项目结构规范"
---

# VK-UniCloud 框架概述

## 框架概述

VK-UniCloud 是一个基于 UniCloud 的快速开发框架，包含客户端框架和管理端框架两部分：

- **客户端框架**: vk-unicloud-router - 云函数路由模式开发框架
- **管理端框架**: vk-unicloud-admin - 基于 Element UI 的后台管理系统

### 核心特性

#### 1. 云函数路由模式
- 使用纯原生代码实现路由模式，兼容性强
- 减少云函数数量，一个云函数实现多个功能
- 支持云函数和云对象两种模式
- 美化云函数请求日志，便于调试

#### 2. 内置丰富API
- 集成 uni-id 用户系统
- 提供 vk.baseDao 数据库API
- 内置微信、支付宝、百度等平台服务端API
- 支持短信、邮件、支付等功能

#### 3. 权限管理
  - 全局过滤器，过滤非法请求
  - 完善的用户角色权限系统
  - 支持权限精确到每个云函数

#### 4. 开发工具
- 万能表格组件（管理端）
- 万能表单组件（管理端）
- 代码生成器
- 调试工具

## 项目结构

### 云端目录结构
router/service 此目录为业务逻辑层，所有业务逻辑都写在这个目录下，框架会自动扫描这个目录下的所有云函数，然后根据路由规则自动注册云函数，无需手动注册，无需关心路由规则，只需关心业务逻辑即可。

router/service/admin 为管理端业务逻辑，router/service/client 为客户端业务逻辑，router/service/user 为统一用户中心服务，router/service/plugs 为插件逻辑，router/service/template 为云函数模板，router/service/muban.js 为云函数模板（新建一个云函数应复制粘贴这个文件）。
.
├── service──────────────────────# 业务逻辑层（用于写业务逻辑）
│ └── admin────────────────# 后台管理端业务逻辑
│ ── └── user─────────────────# 用户管理（自己系统的逻辑）
│ ──── └── kh───────────────────# kh函数为必须登录后才能访问的函数
│ ──── └── pub──────────────────# pub函数为所有人都可以访问,不限制
│ ──── └── sys──────────────────# sys函数为需要特定授权才可以访问的函数
│ ──── └── util─────────────────# 用户管理专用的工具包
│ ── └── order────────────────# 订单服务（自己系统的逻辑）
│ ──── └── kh───────────────────# kh函数为必须登录后才能访问的函数
│ ──── └── pub──────────────────# pub函数为所有人都可以访问,不限制
│ ──── └── sys──────────────────# sys函数为需要特定授权才可以访问的函数
│ ──── └── util─────────────────# 订单管理专用的工具包
│ ── └── system───────────────# 系统管理（用户、角色、权限、菜单、应用）
│ ── └── system_uni───────────# 框架内置一些其他通用功能管理
│ └── client───────────────# 客户端业务逻辑（H5、小程序、APP）
│ ── └── user─────────────────# 用户服务（自己系统的逻辑）
│ ──── └── kh───────────────────# kh函数为必须登录后才能访问的函数
│ ──── └── pub──────────────────# pub函数为所有人都可以访问,不限制
│ ──── └── util─────────────────# 用户服务专用的工具包
│ ── └── order────────────────# 订单服务（自己系统的逻辑）
│ ──── └── kh───────────────────# kh函数为必须登录后才能访问的函数
│ ──── └── pub──────────────────# pub函数为所有人都可以访问,不限制
│ ──── └── util─────────────────# 订单服务专用的工具包
│ ── └── xxxxxxxxxxxxxxx──────# 
│ ── └── xxxxxxxxxxxxxxx──────# 
│ └── common───────────────# 公共逻辑（公共接口）
│ ── └── xxxxxxxxxxxxxxxx─────# 
│ ── └── xxxxxxxxxxxxxxxx─────# 
│ ── └── xxxxxxxxxxxxxxxx─────# 
│ └── user─────────────────# 统一用户中心服务(已集成uniID)（用户中心作为核心，且为了方便插件升级,故与admin和client平级）
│ ── └── kh───────────────────# kh函数为必须登录后才能访问的函数(客户端用户)
│ ── └── pub──────────────────# pub函数为所有人都可以访问,不限制
│ ── └── sys──────────────────# sys函数为后端管理人员才能访问的函数(商家后台工作人员)
│ ── └── util─────────────────# 统一用户中心服务专用的工具包
│ └── plugs───────────────# 插件逻辑（插件专用）（会陆续新增一些实用性插件给开发者使用，如微信小程序发送订阅消息等等）
│ ──└── plugs-A───────────────────# 插件A
│ ────└── admin───────────────────# 插件A admin端
│ ────└── client──────────────────# 插件A client端
│ ──└── plugs-B───────────────────# 插件B
│ ────└── admin───────────────────# 插件B admin端
│ ────└── client──────────────────# 插件B client端
│ └── template─────────────# 云函数模板（插件内的云函数写法模板）
│ ── └── db_api───────────────# 数据库接口调用模板
│ └── muban.js─────────────# 云函数模板（新建一个云函数应复制粘贴这个文件）
│ └── muban_easy.js────────# 云函数模板（简易版）
└─────────────────────────────────


### 云函数目录权限规范
```
service/
├── admin/                   # 管理端业务逻辑
│   └── [模块]/
│       ├── sys/            # 需要特定权限验证
│       ├── kh/             # 需要登录 + allow_login_background
│       └── pub/            # 公开访问
├── client/                  # 客户端业务逻辑
│   └── [模块]/
│       ├── kh/             # 需要登录
│       └── pub/            # 公开访问
└── user/                    # 用户中心服务
    ├── sys/                # 管理员权限
    ├── kh/                 # 用户登录权限
    └── pub/                # 公开访问